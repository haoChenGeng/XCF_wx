var M={tabInit:function(){var $all=$(".tab-wrap");$all.each(function(){function checkItem(index){var titleEle=tLi.eq(index);titleEle.hasClass("active")||(titleEle.addClass("active").siblings().removeClass("active"),conUl.eq(index).addClass("active").siblings("ul.tab-info").removeClass("active"),eval(titleEle.attr("event")))}var wrap=$(this),tLi=wrap.find("ul.tab-title>li"),conUl=wrap.find("ul.tab-info");$.each(tLi,function(t){$(this).on("tap",function(){checkItem(t)})}),checkItem(0)})},checkBoxInit:function(t){var e=".m-item",i=$(".m-checkbox-2");$.each(i,function(){var i=$(this),n=i.closest(e).find('input[name="pwd"]'),a=i.closest(e).find('input[name="pwdtxt"]');n.on("input",function(){a.val($(this).val())}),a.on("input",function(){n.val($(this).val())}),i.on("click",function(){i.toggleClass("checked");var e=i.hasClass("checked")?1:0;0==e?(a.hide(),n.show()):(n.hide(),a.show()),t&&t()})})},testInputReg:function(t){var e=$(t),i=e.val(),n=e.attr("data-reg"),a=new RegExp(n,"g");return null!=i&&null!=a&&void 0!=n?a.test(i):!0},requireInput:function(t,e){var i=$("input[data-require]"),n=1;return $.each(i,function(){return""==$(this).val()?(n=0,t&&t($(this).attr("data-require")),!1):void 0}),n&&e&&e(),n},checkForm:function(t){var e=$("input[data-reg]"),i=this,n=$("input[data-pwd]"),a=$("input[data-repwd]"),o=!0;return M.requireInput(function(t){M.alert({title:"提示",message:t})})?n.val()!=a.val()?(i.alert({title:"提示",message:"两次密码不一致"}),!1):($.each(e,function(){return i.testInputReg(this)?void 0:(i.alert({title:"提示",message:$(this).attr("data-error")}),o=!1,!1)}),void(o&&t&&t())):!1},recordItemInit:function(){var t=$(".item-record");$.each(t,function(){var t=$(this);t.on("click",function(){t.toggleClass("active")})})},showLightBox:function(){this.isLightboxExist()?$(".light-box").show():this.createLightBox()},isLightboxExist:function(){return $(".light-box").length},hideLightBox:function(){this.isLightboxExist()&&($(".light-box").css({"-webkit-animation":"fadeOut .5s","-animation":"fadeOut .5s"}),setTimeout(function(){$(".light-box").remove()},1e3))},alert:function(t){var e=this,i={title:"提示",message:"默认提示",confirm:!0,cancel:!1,confirmtext:"确定",canceltext:"取消",confirmclick:function(){e.removeAlert()},cancelclick:function(){e.removeAlert()}};this.extend(i,t);var n=i.confirm?'<div class="pop-btn confirm">'+i.confirmtext+"</div>":"",a=i.cancel?'<div class="pop-btn cancel">'+i.canceltext+"</div>":"",o=i.confirm&&i.cancel,c=o?"flex":"",l=$('<div class="pop-box '+c+'"><div class="pop-title">'+i.title+'</div><div class="pop-content">'+i.message+"</div>"+a+n+"</div>");this.createLightBox(),l.find(".confirm").on("click",i.confirmclick),l.find(".cancel").on("click",i.cancelclick),l.appendTo($(".wrap"))},removeAlert:function(){$(".pop-box").remove(),this.hideLightBox()},createLightBox:function(t){var e=$('<div class="light-box"></div>');e.on("click",function(){t&&t()}),e.appendTo($(".wrap")).addClass("active")},extend:function(t,e){for(key in e)t[key]=e[key]},countDown:function(t){var e=this,i={target:$("input[data-countDown]"),booltarget:1,times:10,failfn:function(){},startfn:function(){},endfn:function(){}};M.extend(i,t);var n=i.times;i.target.on("click",function(){if(console.log(e.testInputReg($(i.booltarget))),1!=i.booltarget&&!e.testInputReg($(i.booltarget)))return void e.alert({title:"提示",message:$(i.booltarget).attr("data-error")});i.startfn();var t=null,a=$(this),o=a.val();a.val("倒计时 "+n+" 秒"),a.attr("disabled","disabled").addClass("disabled"),t=setInterval(function(){0==n?(clearInterval(t),a.val(o),a.removeAttr("disabled").removeClass("disabled"),i.endfn()):(n--,a.val("倒计时 "+n+" 秒"))},1e3)})}};Zepto(function(t){M.recordItemInit()});